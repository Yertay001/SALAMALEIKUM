{% extends 'base.html' %}
{% load static %}

{% block content %}
<style>
    .profile-container {
        display: flex;
        gap: 2rem;
        padding: 2rem;
        justify-content: center;
        flex-wrap: wrap;
    }

    .profile-box, .orders-box {
        background: #ffffff;
        padding: 2rem;
        border-radius: 16px;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
    }

    .profile-box {
        flex: 1 1 300px;
        max-width: 400px;
    }

    .orders-box {
        flex: 2 1 500px;
    }

    h2 {
        margin-top: 0;
        font-size: 1.5rem;
        color: #333;
    }

    .profile-box p {
        margin: 0.5rem 0;
        color: #555;
    }

    .no-orders {
        color: #888;
        font-style: italic;
    }
</style>

<div class="profile-container">
    <!-- –ë–ª–æ–∫ –ø—Ä–æ—Ñ–∏–ª—è -->
     <div class="profile-box">
    <h2>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
    <p><strong>–ò–º—è:</strong> {{ user.first_name }}</p>
    <p><strong>–§–∞–º–∏–ª–∏—è:</strong> {{ user.last_name }}</p>
    <p><strong>Email:</strong> {{ user.email }}</p>
    <p><strong>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong> {{ user.created_at|date:"d.m.Y H:i" }}</p>

    <hr>

    {% if profile %}
        <p><strong>–ü–æ–ª:</strong> {{ profile.get_gender_display|default:"–Ω–µ —É–∫–∞–∑–∞–Ω" }}</p>
        <p><strong>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</strong> {{ profile.birth_date|date:"d.m.Y" }}</p>
        <p><strong>–°—Ç—Ä–∞–Ω–∞:</strong> {{ profile.country|default:"–Ω–µ —É–∫–∞–∑–∞–Ω–∞" }}</p>
        <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ profile.phone_number|default:"–Ω–µ —É–∫–∞–∑–∞–Ω" }}</p>

        {% if profile.address_set.all %}
            <hr>
            <h3>–ê–¥—Ä–µ—Å–∞:</h3>
            <ul>
                {% for addr in profile.address_set.all %}
                    <li>
                        {{ addr.city }}, {{ addr.district }}, {{ addr.adress_line_1 }} {{ addr.adress_line_2 }}, {{ addr.post_code }}
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>–ê–¥—Ä–µ—Å –Ω–µ —É–∫–∞–∑–∞–Ω.</p>
        {% endif %}
    {% else %}
        <p>–ü—Ä–æ—Ñ–∏–ª—å –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω.</p>
    {% endif %}

    <!-- üîò –ö–Ω–æ–ø–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div style="margin-top: 1.5rem;">
        <a href="{% url 'edit_profile' %}" style="
            display: inline-block;
            padding: 0.5rem 1rem;
            background-color: #5B3FE2;
            color: white;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
        ">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
    </div>
</div>

 

    <!-- –ë–ª–æ–∫ –∑–∞–∫–∞–∑–æ–≤ -->
    <div class="orders-box">
        <h2>–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</h2>
        {% if user.orders.all %}
            <ul>
                {% for order in user.orders.all %}
                    <li>
                        <strong>–ó–∞–∫–∞–∑ #{{ order.id }}</strong> ‚Äî {{ order.created_at|date:"d.m.Y H:i" }} ‚Äî <strong>{{ order.total_price }} —Ç–≥</strong>
                        <ul>
                            {% for item in order.items.all %}
                                <li>{{ item.product.name }} ‚Äî {{ item.quantity }} —à—Ç.</li>
                            {% endfor %}
                        </ul>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="no-orders">–í—ã –µ—â—ë –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞–∫–∞–∑—ã–≤–∞–ª–∏.</p>
        {% endif %}
    </div>
</div>


{% endblock content %}

